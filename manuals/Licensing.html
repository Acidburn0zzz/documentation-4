<html lang="en">
<head>
<title>Licenses</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Licenses">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
@font-face {
    font-family: 'CFE_FONT';
    src: url('fonts/eot/opensans-regular-webfont.eot');
    src: local('â˜º'),  url('fonts/ttf/opensans-regular-webfont.ttf') format('truetype'), url('fonts/svg/opensans-regular-webfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
}    
pre {
    background-color: #EEFFDD;
    border: 1px solid #CCCCCC;
    font-family: courier;
    margin-bottom: 10px;
    margin-top: 10px;
    padding: 5px;
    font-size: 90%;
    }
pre.display { font-family:inherit }
pre.format  { font-family:inherit }
pre.smallexample
pre.smalllisp,
pre.smallformat,
pre.smalldisplay {
  font-size: 90%;
} 

span.sc    { font-variant:small-caps }
span.roman { font-family:serif; font-weight:normal; } 
span.sansserif { font-family:sans-serif; font-weight:normal; } 

body {
    font:  90%  'CFE_FONT', arial, Helvetica,sans-serif; 
    color: #646464;
    padding: 10px 20px;
    width: 960px;
    margin: 0 auto;
}
.node
{
    text-align: right;
    padding: 2px;
    font-size: smaller;
}
.node hr {
    border: 0;
    width: 100%;
    color: #CCC;
    background-color: #CCC;
    height: 5px;
}
.section {
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
}

h1 {
    font-size: 26px;
    font-weight: normal;
    line-height: 32px;
    margin: 32px 0 16px;
    text-align: left;
    text-transform: uppercase;
}

h2 {
    color: #9E9981 !important;
    font-size: 16px;
    line-height: 18px;
    font-weight: normal;
    margin: 16px 0 26px;
    text-align: left;
}
h3 {
    margin-top: 3px;
    margin-right: 0px;
    margin-bottom: 10px;
    margin-left: 0px;
    line-height: 20px;
    font-size: 16px;
    font-weight: normal;
}

.contents
{
    background-color: #CCC;
    padding-top: 2px;
    padding-right: 2px;
    padding-bottom: 2px;
    padding-left: 10px;
}

.index-cp
{  
background: #fff url(index-cp.png) right repeat-y;
}

.index-vr
{  
background: #fff url(index-vr.png) right repeat-y;
}

.index-mb
{  
background: #eee url(index-faq.png) right repeat-y;
}

table.border
{
	border-color: #666;
	border-width: 0px;
}

FONT.liten {font-size: 80%; }
 
.tynn {
    font-family: Arial, Helvetica, sans-serif;
    font-size: smaller;
    font-style: normal;
    font-weight: lighter;
    margin-bottom: 0em;
    font-size: 11pt;
}
.verbatim {
    color: #000;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.example {
    color: #000;
    width: 100%;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 20px;
    margin-left: 0px;
}
.smallexample {
    color: #000;
    padding-top: 10px;
    padding-right: 30px;
    padding-bottom: 5px;
    padding-left: 30px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
}
.cartouche {
    padding: 5px;
    font-style: italic;
    font-size: 85%;
}

table.cartouche {
    border: none !important;
}

 .cartouche td  {
    background: none !important;
    border: none !important;
    padding: 5px; 

/*    background-color: #ddd;
    border: 1px solid #ccc;
    padding: 5px;*/
}

A:link { color: #2c2e70 }
A:visited { color: black }
A:active { color: #600041 }
dt em {font-weight: bold}
/* don't change this rule */    
pre.sp {
    background: none !important;   
    border:none !important
}
/* --- */
/*code hightlight*/
.red { color: #b80047; font-weight: bold; }

.blue { color: blue;  /*font-weight: bold;*/ }

.green { color: darkgreen; }

.comment { font-style: italic; }
--></style>
</head>
<body>
<h1 class="settitle">Licenses</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">CFEngine-Tutorial</h2>

   <p><a href="#Contents"><h1>COMPLETE TABLE OF CONTENTS</h1></a>
<h2>Summary of contents</h2>

<h3 class="unnumberedsec">What is a CFEngine license?</h3>

<pre class="sp">

</pre>

A license is an authorization to use a commercial edition of the
CFEngine software. It consists of a single file, generated by CFEngine
AS headquarters in Norway. The file enables the CFEngine software to track
authorizations of commercial editions, e.g.  CFEngine
Nova or CFEngine Constellation.

   <p>Commercial versions of the CFEngine software that are not authorized
revert to behaving just like the open community editions. This allows them
to function in a limited capacity to assist you in deploying licenses
or upgrading licenses.

<h3 class="unnumberedsec">Why do I need a license?</h3>

<pre class="sp">

</pre>

The extra facilities provided by commercial editions of CFEngine are
subscription based, and must be paid for. License files enable these
extra features for commercial editions.

<h3 class="unnumberedsec">Will I need a license server?</h3>

<pre class="sp">

</pre>

No. In our experience, license servers have few redeeming features. 
It is CFEngine's policy that CFEngine should make computer
administration simpler, not more difficult. Our licenses serve
two purposes:
     <ul>
<li>To enable additional features for the duration of a subscription contract. 
<li>To assist users in tracking systems that are using the CFEngine commercial editions,
so that they are not violating the legal terms of their contract. 
</ul>

<h3 class="unnumberedsec">How do you obtain a license?</h3>

<pre class="sp">

</pre>

To obtain a commercial license from CFEngine, you must first have
signed a contract (purchase order) with the Company or one of its
partners.  This entitles you to run a limited number of licensed
instances of the CFEngine software. You may not mix different editions
of CFEngine software, and the license is for whatever version you have
paid for.

   <p>Once a purchase has been made, you must send CFEngine Support a copy
of the <i>public key file</i> belonging to each host you wish to be a
CFEngine <i>policy server</i>, along with an estimate of the maximum
number of clients that is expected to use each server. 
The maximum number of licenses is fixed by the contract.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
Create a license request on <a href="http://ticket.CFEngine.com">http://ticket.CFEngine.com</a> with the
public key as an attachment. 
</td></tr></table>

   <p>The public key file lies in the CFEngine working directory, e.g.

<pre class="verbatim">policyhost# ls /var/cfengine/ppkeys/localhost.pub
</pre>

   <p>To generate such a public key you must use some edition of the
CFEngine software (either the Community Edition, or an unlicensed
version of a commercial product from a pilot demo. etc). You generate
key pair by running this command:

   <pre class="sp">

</pre>
<p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="verbatim">host# cf-key
</pre>
</td></tr></table>

   <pre class="sp">

</pre>

If you have been through a pilot process, or if you have used the Community Edition of CFEngine, you will already
have this file.  You must then send the file <code>localhost.pub</code> for
each host.

<h3 class="unnumberedsec">How should I choose my policy servers?</h3>

<pre class="sp">

</pre>

Your policy server is the single point of change for CFEngine
management.  It is the server host on which all policy changes are
deployed, and it also doubles as a knowledge aggregator and a license
tracker. This host should be able to exchange data with every instance
running CFEngine at some time.

   <p>For some organizations, a single policy server is enough. More complex
environments, that are distributed geographically or have
intermittent communications, such as

     <ul>
<li>Ships
<li>Aircraft
<li>Probes
<li>Mobile devices
</ul>
   need to have localized policy servers. These can be
managed independently, or they can act as staging servers for a central
master-server.  CFEngine does not place any restrictions on you here; we
can provide multiple licenses for implementing such a model if you
wish.

<h3 class="unnumberedsec">What should you do with the license?</h3>

<pre class="sp">

</pre>

When you receive the license file from us, you must install it on every host. 
The simplest way to do this is to install CFEngine on the policy server(s)
first and install it there. 
Install the file in the <samp><span class="file">/var/cfengine/masterfiles</span></samp> directory of the policy
server(s), e.g.

   <pre class="sp">

</pre>
<p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="verbatim">mkdir -p /var/cfengine/masterfiles
cp license.dat /var/cfengine/masterfiles
</pre>
</td></tr></table>

   <pre class="sp">

</pre>

Now, when you bootstrap each client, the license will follow automatically. 
The <samp><span class="file">license.dat</span></samp> file should ultimately end up in the
<samp><span class="file">/var/cfengine/inputs</span></samp> (or Windows equivalent) directory on each host to
enable the license.

   <p>To summarize, a complete license for each client host consists of
     <ul>
<li>The license file (e.g. <samp><span class="file">license.dat</span></samp> in <samp><span class="file">inputs</span></samp>)
<li>The policy server's public key (i.e. <samp><span class="file">root-123.456.789.123.pub</span></samp> on clients or <samp><span class="file">localhost.pub</span></samp> on policy servers in <samp><span class="file">ppkeys</span></samp>)
</ul>
   For each client machine, you bootstrap with (possbly temporary)
network connectivity to the policy server (this is convenient for the exchange
of files):

   <pre class="sp">

</pre>
<p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="verbatim">host# cf-agent --bootstrap --policy-server 123.456.789.123
</pre>
</td></tr></table>

   <pre class="sp">

</pre>

If for some reason your hosts are permanently off-line, or cannot
authorize at the time of installation, you will need to copy these
files manually, off line.

   <p>As long as these files are present, CFEngine does not care whether
hosts are on- or off-line.

<h3 class="unnumberedsec">Promising your number of licenses</h3>

<p>You need to do one more thing in the CFEngine configuration. 
You must make a promise about the number of CFEngine instances
you can paid for. This is a confirmation from you that documents
in reports what you claim to have paid for

<pre class="verbatim">body common control

{
bundlesequence  => {
                   "update",
                   "garbage_collection",
                   "change_management",
                   #...
                   };

inputs          => {
                   "CFEngine.cf",
                   "CFEngine_stdlib.cf",
                   };

version => "1.2.3";

host_licenses_paid => "100";
}

</pre>

<p class="noindent">You should make this promise both in <samp><span class="file">promises.cf</span></samp>
and <samp><span class="file">failsafe.cf</span></samp>.

<h3 class="unnumberedsec">What does CFEngine the company do with the license?</h3>

<pre class="sp">

</pre>
CFEngine keeps the number of licenses purchased for your edition on
file, and asks you to report how many instances you are running at
regular intervals for accounting purposes. This report can be generated
from each CFEngine policy server itself.

</body></html>

